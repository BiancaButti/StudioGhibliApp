default_platform(:ios)

platform :ios do

  ######################################################
  # ðŸš§ LANE: build
  # Compila o app com o scheme StudioGhibliApp
  ######################################################
  desc "ðŸš§ Compila o app e gera o .ipa"
  lane :build do
    build_app(
      scheme: "StudioGhibliApp",
      export_method: "development", # Futuramente: "app-store"
      output_directory: "./fastlane/output"
    )
  end

  ######################################################
  # âœ… LANE: test
  # Roda os testes unitÃ¡rios
  ######################################################
  desc "Run unit tests without code signing"
  lane :test do
    scan(
      scheme: "StudioGhibliApp",
      clean: true,
      build_for_testing: true,
      code_coverage: true,
      disable_concurrent_testing: true
    )
  end

  # âœˆï¸ Futuramente: lane :beta => para TestFlight
  # ðŸš€ Futuramente: lane :release => para App Store
end
